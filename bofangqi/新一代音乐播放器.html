<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新一代音乐播放器</title>
    <link rel="shortcut icon" href="#" />
    <style>
        body {
            margin: 0;
        }

        video {
            position: absolute;
            bottom: -200px;
            right: 0;
            z-index: -99;
            /*  -webkit-filter:grayscale(20%); */
        }

        #title {
            color: black;
            font-size: 55px;
            margin-top: 0;
            margin-left: 40%;
            z-index: 10;
        }

        #juli {
            margin-top: 12%;
        }

        #name {
            color: hotpink;
            font-size: 39px;
            margin-left: 16%;
            position: static;
            z-index: 10;
        }

        audio {
            margin-left: 8%;
            width: 400px;
            height: 55px;
        }

        #btn {
            margin-left: 50px;
        }

        button {
            font-size: 20px;
            color: springgreen;
            background-color: gray;
            width: 90px;
            height: 60px;
            margin-left: 35px;
            z-index: 10;
            border-radius: 25%;
        }

        button:hover {
            color: white;
            background-color: yellowgreen;
        }

        button:active {
            color: black;
            background-color: darkorchid;
        }

        .lyric_area {
            height: 400px;
            overflow: hidden;
            margin-top: 100px;
            float: right;
            margin-right: 20px;
        }

        #lyric {
            color: pink;
            font-size: 20px;
            line-height: 30px;
            transition-duration: 600ms;
        }

        #lyric .lineHigh {
            color: deeppink;
        }
    </style>

</head>

<body>
    <div id="app">
        <h2 id="title">音乐盒</h2>
        <div class="lyric_area">
            <li style="list-style-type:none;" id="lyric"></li>

            <textarea id="gec1" cols="30" style="display: none">
                [00:03.37]如果当时
                [00:05.91]词/曲/制作人/编曲：Vae
                [00:06.84]演唱：许嵩
                [00:09.82].
                [00:13.65]为什么 你当时对我好
                [00:18.65]又为什么 现在变得冷淡了
                [00:25.98]我知道 爱要走难阻挠
                [00:31.68]反正不是我的 我也不该要
                [00:39.05]你和我 曾经有共同爱好
                [00:44.55]谁的耳边 总有绝句在萦绕
                [00:51.35]我们俩 用文言文对话真的很搞笑
                [00:58.27]还笑那曹操贪慕着小乔
                [01:04.79]天灰了 雨坠了
                [01:08.14]视线要模糊了
                [01:11.13]此时感觉到你的重要
                [01:16.80]爱走了 心走了
                [01:20.54]你说你要走了
                [01:25.43]我为你唱最后的古谣
                [01:31.57]红雨瓢泼泛起了回忆怎么潜
                [01:37.45]你美目如当年
                [01:40.86]流转我心间
                [01:43.83]渡口边最后一面洒下了句点
                [01:49.96]与你若只如初见
                [01:53.38]何须感伤离别
                [01:54.61].
                [02:22.93]你和我 曾经有共同爱好
                [02:29.55]谁的耳边 总有绝句在萦绕
                [02:35.74]我们俩 用文言文对话真的很搞笑
                [02:42.23]还笑那曹操贪慕着小乔
                [02:49.04]天灰了 雨坠了
                [02:52.03]视线要模糊了
                [02:55.12]此时感觉到你的重要
                [03:00.85]爱走了 心走了
                [03:04.54]你说你要走了
                [03:08.02]我为你唱最后的古谣
                [03:14.13]红雨瓢泼泛起了回忆怎么潜
                [03:20.20]你美目如当年
                [03:23.48]流转我心间
                [03:26.39]渡口边最后一面洒下了句点
                [03:32.73]与你若只如初见
                [03:36.03]何须感伤离别
                [03:39.47]红雨瓢泼泛起了回忆怎么潜
                [03:45.28]你美目如当年
                [03:48.84]流转我心间
                [03:51.77]渡口边最后一面洒下了句点
                [03:57.96]与你若只如初见
                [04:01.16]何须感伤离别
                [04:12.07].
                [04:29.16]红雨瓢泼泛起了回忆怎么潜
                [04:35.30]你美目如当年
                [04:39.26]流转我心间
                [04:42.19]渡口边最后一面洒下了句点
                [04:48.77]与你若只如初见
                [04:51.75]何须感伤离别
                [04:55.21]</textarea>

            <textarea id="gec2" cols="30" style="display: none">
                    [00:01.92]大鱼-(动画电影《大鱼海棠》印象曲) 
                    [00:04.06]词：尹约
                    [00:06.08]曲：钱雷 
                    [00:42.86]海浪无声将夜幕深深淹没
                    [00:49.63]漫过天空尽头的角落
                    [00:56.34]大鱼在梦境的缝隙里游过
                    [01:03.35]凝望你沉睡的轮廓
                    [01:09.39]看海天一色 听风起雨落
                    [01:16.09]执子手吹散苍茫茫烟波
                    [01:23.03]大鱼的翅膀 已经太辽阔
                    [01:30.75]我松开时间的绳索
                    [01:36.82]怕你飞远去 怕你离我而去
                    [01:43.50]更怕你永远停留在这里
                    [01:50.50]每一滴泪水 都向你流淌去
                    [01:58.21]倒流进天空的海底
                    [02:18.70]海浪无声将夜幕深深淹没
                    [02:25.63]漫过天空尽头的角落
                    [02:32.40]大鱼在梦境的缝隙里游过
                    [02:39.20]凝望你沉睡的轮廓
                    [02:45.36]看海天一色 听风起雨落
                    [02:52.10]执子手吹散苍茫茫烟波
                    [02:59.05]大鱼的翅膀 已经太辽阔
                    [03:06.78]我松开时间的绳索
                    [03:12.67]看你飞远去 看你离我而去
                    [03:19.52]原来你生来就属于天际
                    [03:26.46]每一滴泪水 都向你流淌去
                    [03:34.15]倒流回最初的相遇
                    [03:40.07]</textarea>

            <textarea id="gec3" cols="30" style="display: none">
                    [00:00.32]演员
                    [00:01.00]
                    [00:01.61]作词：薛之谦
                    [00:02.64]作曲：薛之谦
                    [00:03.00]演唱：薛之谦
                    [00:04.20].
                    [00:21.12]简单点说话的方式简单点
                    [00:30.20]递进的情绪请省略
                    [00:33.64]你又不是个演员
                    [00:36.38]别设计那些情节
                    [00:39.36].
                    [00:41.93]没意见我只想看看你怎么圆
                    [00:51.54]你难过的太表面 像没天赋的演员
                    [00:57.15]观众一眼能看见
                    [01:00.19].
                    [01:02.22]该配合你演出的我演视而不见
                    [01:07.68]在逼一个最爱你的人即兴表演
                    [01:12.90]什么时候我们开始收起了底线
                    [01:18.02]顺应时代的改变看那些拙劣的表演
                    [01:23.42]可你曾经那么爱我干嘛演出细节
                    [01:28.63]我该变成什么样子才能延缓厌倦
                    [01:33.87]原来当爱放下防备后的这些那些
                    [01:39.37]才是考验
                    [01:41.97].
                    [01:44.60]没意见你想怎样我都随便
                    [01:54.53]你演技也有限
                    [01:57.58]又不用说感言
                    [02:00.15]分开就平淡些
                    [02:02.99].
                    [02:05.00]该配合你演出的我演视而不见
                    [02:10.53]别逼一个最爱你的人即兴表演
                    [02:15.81]什么时候我们开始没有了底线
                    [02:21.01]顺着别人的谎言被动就不显得可怜
                    [02:26.43]可你曾经那么爱我干嘛演出细节
                    [02:31.52]我该变成什么样子才能配合出演
                    [02:36.72]原来当爱放下防备后的这些那些
                    [02:41.86]都有个期限
                    [02:44.60].
                    [02:47.56]其实台下的观众就我一个
                    [02:53.04]其实我也看出你有点不舍
                    [02:58.34]场景也习惯我们来回拉扯
                    [03:02.93]还计较着什么
                    [03:07.39][03:08.71]其实说分不开的也不见得
                    [03:14.04]其实感情最怕的就是拖着
                    [03:19.21]越演到重场戏越哭不出了
                    [03:24.07]是否还值得
                    [03:28.12].
                    [03:29.07]该配合你演出的我尽力在表演
                    [03:34.39]像情感节目里的嘉宾任人挑选
                    [03:39.68]如果还能看出我有爱你的那面
                    [03:44.82]请剪掉那些情节让我看上去体面
                    [03:50.04]可你曾经那么爱我干嘛演出细节
                    [03:55.31]不在意的样子是我最后的表演
                    [04:01.05]是因为爱你我才选择表演 这种成全
                    </textarea>
            <textarea id="gec4" cols="30" style="display: none">
                [ti:一直很安静]
                [ar:阿木]
                [al:]
                [by:绛色]
                
                [00:00.00]一直很安静
                [00:03.49].
                [00:04.51]演唱:阿木
                [00:08.14].
                [00:17.36].
                [00:25.86]空荡的街景
                [00:29.82]想找个人放感情
                [00:34.66]做这种决定
                [00:38.43]是寂寞与我为邻
                [00:42.56].
                [00:43.57]我们的爱情
                [00:47.20]像你路过的风景
                [00:52.11]一直在进行
                [00:55.30]脚步却从来不会为我而停
                [00:59.50].
                [01:02.27]给你的爱一直很安静
                [01:06.10]来交换你偶尔给的关心
                [01:10.60]明明是三个人的电影
                [01:14.83]我却始终不能有姓名
                [01:20.08][01:40.65]你说爱像云
                [01:43.83]要自在飘浮才美丽
                [01:48.90]我终于相信
                [01:52.06]分手的理由有时候很动听
                [01:56.16].
                [01:56.54]给你的爱一直很安静
                [02:00.62]来交换你偶尔给的关心
                [02:05.23]明明是三个人的电影
                [02:09.39]我却始终不能有姓名
                [02:13.81]给你的爱一直很安静
                [02:18.28]我从一开始就下定决心
                [02:22.75]以为自己要的是曾经
                [02:26.89]却发现爱一定要有回音
                [02:31.49].
                [02:58.03]给你的爱一直很安静
                [03:01.84]来交换你偶尔给的关心
                [03:06.37]明明是三个人的电影
                [03:10.62]我却始终不能有姓名
                [03:15.07]给你的爱一直很安静
                [03:19.41]除了泪在我的脸上任性
                [03:23.79]原来缘分是用来说明
                [03:28.16]你突然不爱我这件事情
                [03:48.05]
                    </textarea>
            <textarea id="gec5" cols="30" style="display: none">
                   [ti:后来 ]
                   [ar:刘若英]
                   [al:我等你]
                   [by:昨夜星辰昨夜风]
                   [la:zh]
                   [00:12.18]后来
                   [00:14.26]我总算学会了如何去爱
                   [00:19.01]可惜你早已远去
                   [00:21.87]消失在人海
                   [00:25.14]后来
                   [00:27.05]终于在眼泪中明白
                   [00:31.93]有些人一旦错过就不再
                   [00:39.67]栀子花白花瓣
                   [00:44.99]落在我蓝色百褶裙上
                   [00:51.41]爱你!你轻声说
                   [00:58.61]我低下头闻见一阵芬芳
                   [01:04.92]那个永恒的夜晚
                   [01:08.97]十七岁仲夏
                   [01:11.88]你吻我的那个夜晚
                   [01:17.98]让我往后的时光
                   [01:21.31]每当有感叹
                   [01:24.34]总想起当天的星光
                   [01:30.84]那时候的爱情
                   [01:36.46]为什么就能那样简单
                   [01:42.48]而又是为什么人年少时
                   [01:49.96]一定要让深爱的人受伤
                   [01:56.06]在这相似的深夜里
                   [02:00.32]你是否一样
                   [02:03.32]也在静静追悔感伤
                   [02:09.06]如果当时我们能不那么倔强
                   [02:15.86]现在也不那么遗憾
                   [02:20.91]你都如何回忆我
                   [02:23.94]带着笑或是很沉默
                   [02:27.19]这些年来有没有人能让你不寂寞
                   [02:33.36]后来
                   [02:35.11]我总算学会了如何去爱
                   [02:40.10]可惜你早已远去
                   [02:42.88]消失在人海
                   [02:46.12]后来
                   [02:48.08]终于在眼泪中明白
                   [02:52.83]有些人一旦错过就不再
                   [03:25.13]你都如何回忆我
                   [03:27.92]带着笑或是很沉默
                   [03:31.14]这些年来有没有人能让你不寂寞
                   [03:37.50]后来
                   [03:39.30]我总算学会了如何去爱
                   [03:44.17]可惜你早已远去
                   [03:46.92]消失在人海
                   [03:50.10]后来
                   [03:52.09]终于在眼泪中明白
                   [03:56.77]有些人一旦错过就不再   
                   [04:03.05]后来
                   [04:04.79]我总算学会了如何去爱
                   [04:09.72]可惜你早已远去
                   [04:12.56]消失在人海
                   [04:15.82]后来
                   [04:17.82]终于在眼泪中明白
                   [04:22.53]有些人一旦错过就不再
                   [04:29.45]永远不会再重来
                   [04:35.34]有一个男孩爱着那个女孩
                    </textarea>
            <textarea id="gec6" cols="30" style="display: none">
                        [00:2.12]歌曲：爱一点
                        [00:8.17]演唱：马文斌           
                        [00:15.38]copy:爱一点-莫艳琳
                        [00:27.12]风吹动窗 吹动叶声响
                        [00:32.17]梦在游荡去更远地方
                        [00:37.38]天上的月 露出半只脚
                        [00:42.53]看地上有个人还睡不着
                        [00:47.95]云遮住光 遮住夜更长
                        [00:53.35]风静静穿过你的头发
                        [00:58.50]夜闭上双眼不说话
                        [01:03.65]我知道你在听我怎么讲
                        [01:08.25]我想说我会爱你多一点点
                        [01:13.70]一直就在你的耳边
                        [01:18.99]相信你也爱我 有一点点
                        [01:24.15]只是你一直没发现
                        [01:29.31]想说我会爱你多一点点
                        [01:34.85]一直就在你的耳边
                        [01:40.09]相信我会爱你永远不变
                        [01:45.38]知道你会发现
                        [01:50.48].
                        [02:12.22]风吹动窗 吹动叶声响
                        [02:17.57]梦在游荡去更远地方
                        [02:22.88]天上的月 露出半只脚
                        [02:27.92]看地上有个人还睡不着
                        [02:33.42]云遮住光 遮住夜更长
                        [02:38.65]风静静穿过你的头发
                        [02:43.86]夜闭上双眼不说话
                        [02:48.99]我知道你在听我怎么讲
                        [02:53.64]我想说我会爱你多一点点
                        [02:59.11]一直就在你的耳边
                        [03:04.51]相信你也爱我 有一点点
                        [03:09.56]只是你一直没发现
                        [03:14.72]我想说我会爱你多一点点
                        [03:20.26]一直就在你的耳边
                        [03:25.50]相信我会爱你永远不变
                        [03:30.84]知道你一定会发现
                        [03:35.79]我想说我会爱你多一点点                      
                        [03:41.39]一直就在你的耳边                 
                        [03:46.81]相信我会爱你永远不变          
                        [03:57.10]知道你一定会发现
                        [03:52.05]知道你一定会发现              
                    </textarea>
            <textarea id="gec7" cols="30" style="display: none">
                        [00:00.00]刚好遇见你
                        [00:01.50]演唱：马文斌
                        [00:03.00]原唱：李玉刚
                        [00:11.98]我们哭了
                        [00:15.13]我们笑着
                        [00:18.06]我们抬头望天空
                        [00:21.58]星星还亮着几颗
                        [00:24.57]我们唱着
                        [00:27.42]时间的歌
                        [00:30.38]才懂得相互拥抱
                        [00:33.77]到底是为了什么
                        [00:36.84]ただ君に会えた 美しい奇迹
                        [00:43.33]离れたくない 花舞い涙雨
                        [00:49.51]ただ君に会えば 10年経てど
                        [00:55.68]君への思い 色褪せないよ
                        [01:03.13].
                        [01:13.62]泣いたり
                        [01:16.70]笑ったり 
                        [01:19.71]空见上げたら
                        [01:23.05] 星が瞬き
                        [01:26.12]歌おう 
                        [01:29.15]时の歌 
                        [01:32.06]初めて抱き合う意味を知ったよ
                        [01:38.51]因为我刚好遇见你
                        [01:41.99]留下足迹才美丽
                        [01:44.83]风吹花落泪如雨
                        [01:47.92]因为不想分离
                        [01:51.05]因为刚好遇见你
                        [01:54.06]留下十年的期许
                        [01:57.27]如果再相遇
                        [01:59.80]我想我会记得你
                        [02:03.38]因为刚好遇见你
                        [02:06.39]留下足迹才美丽
                        [02:09.46]风吹花落泪如雨
                        [02:12.63]因为不想分离
                        [02:15.71]因为刚好遇见你
                        [02:18.79]留下十年的期许
                        [02:21.81]如果再相遇
                        [02:24.50]我想我会记得你
                        [02:28.75].
                        [02:30.35]因为我刚好遇见你
                        [02:34.30]留下足迹才美丽
                        [02:37.18]风吹花落泪如雨
                        [02:40.31]因为不想分离
                        [02:43.34]因为刚好遇见你
                        [02:46.42]留下十年的期许
                        [02:49.58]如果再相遇
                        [02:52.28]我想我会记得你
                       
                    </textarea>

        </div>
        <br>
        <div id="juli">
            <i id="name">如果当时
            </i>
            <br />
            <br />
            <audio id="audio" src="../assets/如果当时.mp3" controls autoplay="true"></audio>
        </div>

        <br /><br />
        <br /><br />
        <div id="btn">
            <button id="btn1">播放</button>
            <button id="btn2">暂停</button>
            <button id="btn3">上一首</button>
            <button id="btn4">下一首</button>
        </div>

        <video autoplay muted loop style="width:100%">
            <source src="../assets/yongen.mp4">
        </video>
    </div>
    <script>
        // 播放
        var audio = document.getElementById("audio");
        btn1.onclick = function () {
            if (audio !== null) {
                if (audio.paused) {
                    audio.play();
                } else {
                    audio.pause();
                }
            }
        }

        // 暂停
        btn2.onclick = function () {
            if (audio !== null) {
                if (audio.paused) {
                    audio.play();
                } else {
                    audio.pause();
                }
            }
        }

        var music = new Array();
        music = [
            "如果当时",
            "大鱼",
            "演员",
            "一直很安静",
            "后来",
            "爱一点",
            "刚好遇见你",
        ];
        var x = music.length;
        var num = 0;
        btn3.onclick = function () {
            var name = document.getElementById("name");
            var audio = document.getElementById("audio");
            num = (num + x - 1) % x;
            audio.src = "../assets/" + music[num] + ".mp3";
            name.innerHTML = music[num];
            audio.play();

            var geci = new Array;
            geci = ["gec1", "gec2", "gec3", "gec4", "gec5", "gec6", "gec7"];
            var y = geci[num]
            var lrc = document.getElementById(y).innerHTML;
            var oLRC = {
                ti: "",
                ar: "",
                al: "",
                by: "",
                offset: 0,
                ms: []
            };

            function createLrcObj(lrc) {
                if (lrc.length == 0) return;
                var lrcs = lrc.split('\n');
                for (var i in lrcs) {
                    lrcs[i] = lrcs[i].replace(/(^\s*)|(\s*$)/g, "");
                    var t = lrcs[i].substring(lrcs[i].indexOf("[") + 1, lrcs[i].indexOf("]"));//取[]间的内容
                    var s = t.split(":");
                    if (isNaN(parseInt(s[0]))) {
                        for (var i in oLRC) {
                            if (i != "ms" && i == s[0].toLowerCase()) {
                                oLRC[i] = s[1];
                            }
                        }
                    } else {
                        var arr = lrcs[i].match(/\[(\d+:.+?)\]/g);
                        var start = 0;
                        for (var k in arr) {
                            start += arr[k].length;
                        }
                        var content = lrcs[i].substring(start);
                        for (var k in arr) {
                            var t = arr[k].substring(1, arr[k].length - 1);
                            var s = t.split(":");
                            oLRC.ms.push({
                                t: (parseFloat(s[0]) * 60 + parseFloat(s[1])).toFixed(3),
                                c: content
                            });
                        }
                    }
                }
                oLRC.ms.sort(function (a, b) {
                    return a.t - b.t;
                });
            }
            createLrcObj(lrc);
            function showLRC() {
                var s = "";
                for (var i in oLRC.ms) {
                    s += '<li>' + oLRC.ms[i].c + '</li>';
                }
                document.getElementById("lyric").innerHTML = s;
            }
            showLRC();
            var lineNo = 0,
                C_pos = 6,
                offset = -20,
                audio = document.getElementById("audio");
            var li = document.getElementById("lyric");
            function lineHigh() {
                var lis = li.getElementsByTagName("li");
                if (lineNo > 0) {
                    lis[lineNo - 1].removeAttribute("class");
                }
                lis[lineNo].className = "lineHigh";

                if (lineNo > C_pos) {
                    li.style.transform = "translateY(" + (lineNo - C_pos) * offset * 1.5 + "px)"; //整体向上滚动一行高度
                }
            }
            function goback() {
                li.style.transform = "translateY(0)";
                lineNo = 0;
            }
            audio.ontimeupdate = function () {
                if (lineNo == oLRC.ms.length)
                    return;
                var curTime = audio.currentTime;
                if (parseFloat(oLRC.ms[lineNo].t) <= curTime) {
                    lineHigh();
                    lineNo++;
                }
            };
            function fanhui() {
                var lis = li.getElementsByTagName("li");
                if (lineNo > 0) {
                    lis[lineNo - 1].removeAttribute("class");
                }
                lis[lineNo].className = "lineHigh";
                lis[lineNo].removeAttribute("class");
            }
            audio.addEventListener(
                "play",
                function () {
                    fanhui();
                    goback();
                },
                false
            );
        };
        btn4.onclick = function () {
            var name = document.getElementById("name");
            var audio = document.getElementById("audio");
            num = (num + x + 1) % x;
            audio.src = "../assets/" + music[num] + ".mp3";
            name.innerHTML = music[num];
            audio.play();

            var geci = new Array;
            geci = ["gec1", "gec2", "gec3", "gec4", "gec5", "gec6", "gec7"];
            var y = geci[num]
            var lrc = document.getElementById(y).innerHTML;
            var oLRC = {
                ti: "",
                ar: "",
                al: "",
                by: "",
                offset: 0,
                ms: []
            };

            function createLrcObj(lrc) {
                if (lrc.length == 0) return;
                var lrcs = lrc.split('\n');
                for (var i in lrcs) {
                    lrcs[i] = lrcs[i].replace(/(^\s*)|(\s*$)/g, "");
                    var t = lrcs[i].substring(lrcs[i].indexOf("[") + 1, lrcs[i].indexOf("]"));//取[]间的内容
                    var s = t.split(":");
                    if (isNaN(parseInt(s[0]))) {
                        for (var i in oLRC) {
                            if (i != "ms" && i == s[0].toLowerCase()) {
                                oLRC[i] = s[1];
                            }
                        }
                    } else {
                        var arr = lrcs[i].match(/\[(\d+:.+?)\]/g);
                        var start = 0;
                        for (var k in arr) {
                            start += arr[k].length;
                        }
                        var content = lrcs[i].substring(start);
                        for (var k in arr) {
                            var t = arr[k].substring(1, arr[k].length - 1);
                            var s = t.split(":");
                            oLRC.ms.push({
                                t: (parseFloat(s[0]) * 60 + parseFloat(s[1])).toFixed(3),
                                c: content
                            });
                        }
                    }
                }
                oLRC.ms.sort(function (a, b) {
                    return a.t - b.t;
                });
            }
            createLrcObj(lrc);
            function showLRC() {
                var s = "";
                for (var i in oLRC.ms) {
                    s += '<li>' + oLRC.ms[i].c + '</li>';
                }
                document.getElementById("lyric").innerHTML = s;
            }
            showLRC();
            var lineNo = 0,
                C_pos = 6,
                offset = -20,
                audio = document.getElementById("audio");
            var li = document.getElementById("lyric");
            function lineHigh() {
                var lis = li.getElementsByTagName("li");
                if (lineNo > 0) {
                    lis[lineNo - 1].removeAttribute("class");
                }
                lis[lineNo].className = "lineHigh";

                if (lineNo > C_pos) {
                    li.style.transform = "translateY(" + (lineNo - C_pos) * offset * 1.5 + "px)"; //整体向上滚动一行高度
                }
            }
            function goback() {
                li.style.transform = "translateY(0)";
                lineNo = 0;
            }
            audio.ontimeupdate = function () {
                if (lineNo == oLRC.ms.length)
                    return;
                var curTime = audio.currentTime;
                if (parseFloat(oLRC.ms[lineNo].t) <= curTime) {
                    lineHigh();
                    lineNo++;
                }
            };
            function fanhui() {
                var lis = li.getElementsByTagName("li");
                if (lineNo > 0) {
                    lis[lineNo - 1].removeAttribute("class");
                }
                lis[lineNo].className = "lineHigh";
                lis[lineNo].removeAttribute("class");
            }
            audio.addEventListener(
                "play",
                function () {
                    fanhui();
                    goback();
                },
                false
            );
        };

        var lrc = document.getElementById("gec1").innerHTML;
        var oLRC = {
            ti: "",
            ar: "",
            al: "",
            by: "",
            offset: 0,
            ms: []
        };

        function createLrcObj(lrc) {
            if (lrc.length == 0) return;
            var lrcs = lrc.split('\n');
            for (var i in lrcs) {
                lrcs[i] = lrcs[i].replace(/(^\s*)|(\s*$)/g, "");
                var t = lrcs[i].substring(lrcs[i].indexOf("[") + 1, lrcs[i].indexOf("]"));//取[]间的内容
                var s = t.split(":");
                if (isNaN(parseInt(s[0]))) {
                    for (var i in oLRC) {
                        if (i != "ms" && i == s[0].toLowerCase()) {
                            oLRC[i] = s[1];
                        }
                    }
                } else {
                    var arr = lrcs[i].match(/\[(\d+:.+?)\]/g);
                    var start = 0;
                    for (var k in arr) {
                        start += arr[k].length;
                    }
                    var content = lrcs[i].substring(start);
                    for (var k in arr) {
                        var t = arr[k].substring(1, arr[k].length - 1);
                        var s = t.split(":");
                        oLRC.ms.push({
                            t: (parseFloat(s[0]) * 60 + parseFloat(s[1])).toFixed(3),
                            c: content
                        });
                    }
                }
            }
            oLRC.ms.sort(function (a, b) {
                return a.t - b.t;
            });
        }
        createLrcObj(lrc);
        function showLRC() {
            var s = "";
            for (var i in oLRC.ms) {
                s += '<li>' + oLRC.ms[i].c + '</li>';
            }
            document.getElementById("lyric").innerHTML = s;
        }
        showLRC();
        var lineNo = 0,
            C_pos = 6,
            offset = -20,
            audio = document.getElementById("audio");
        var li = document.getElementById("lyric");
        function lineHigh() {
            var lis = li.getElementsByTagName("li");
            if (lineNo > 0) {
                lis[lineNo - 1].removeAttribute("class");
            }
            lis[lineNo].className = "lineHigh";

            if (lineNo > C_pos) {
                li.style.transform = "translateY(" + (lineNo - C_pos) * offset * 1.5 + "px)"; //整体向上滚动一行高度
            }
        }
        function goback() {
            li.style.transform = "translateY(0)";
            lineNo = 0;
        }
        audio.ontimeupdate = function () {
            if (lineNo == oLRC.ms.length)
                return;
            var curTime = audio.currentTime;
            if (parseFloat(oLRC.ms[lineNo].t) <= curTime) {
                lineHigh();
                lineNo++;
            }
        };
        audio.onended = function () {
            goback();
        };
        audio.addEventListener(
            "ended",
            function () {
                btn4.onclick();
            },
            false
        );
        function fanhui() {
            var lis = li.getElementsByTagName("li");
            if (lineNo > 0) {
                lis[lineNo - 1].removeAttribute("class");
            }
            lis[lineNo].className = "lineHigh";
            lis[lineNo].removeAttribute("class");
        }
        audio.addEventListener(
            "play",
            function () {
                fanhui();
                goback();
            },
            false
        );


    </script>

</body>

</html>